<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://dbManagementView.title">
    <data>


        <collection id="sourceDbsDc" class="com.company.jmixdatastore.entity.SourceDb">
            <loader id="sourceDbsDl" readOnly="true">
                <query>
                    <![CDATA[select e from SourceDb e]]>
                </query>
            </loader>
            <fetchPlan extends="_base"/>
        </collection>
        <collection id="tableDbsDc" class="com.company.jmixdatastore.entity.TableDb"/>
        <collection id="tableDetailsDc" class="com.company.jmixdatastore.entity.TableDetail"/>
    </data>

    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>

    <layout>
        <!-- Header Panel -->
        <hbox spacing="true"
              padding="true"
              width="100%"
              alignItems="CENTER">

            <h3 text="Quản lý cơ sở dữ liệu"/>
            <entityComboBox id="dbSourseComboBox"
                            itemsContainer="sourceDbsDc"
                            metaClass="SourceDb"
                            width="300px"/>
            <button id="newButton" text="Tạo mới"/>
            <button id="connectButton" text="Kết nối"/>
            <icon id="statusIcon" icon="vaadin:circle"/>
        </hbox>

        <!-- Main Content Area -->
        <split width="100%"
               height="100%"
               orientation="HORIZONTAL"
               >

            <!-- Left Panel - Tables -->
            <vbox spacing="true"
                  padding="true"
                  width="100%"
                  height="100%">

                <hbox width="100%" spacing="true">
                    <h4 text="Danh sách bảng"/>
                </hbox>

                <dataGrid id="keyValueEntitiesDataGrid"
                          dataContainer="tableDbsDc"
                          width="100%"
                          height="100%">
                    <actions>
                        <action id="create" type="list_create"/>
                        <action id="edit" type="list_edit"/>
                        <action id="remove" type="list_remove"/>
                    </actions>
                    <columns>
                        <column property="name"
                                header="Tên bảng"
                                width="200px"/>
                        <column property="description"
                                header="Mô tả"/>
                        <column property="status"
                                header="Trạng thái"/>
                    </columns>
                </dataGrid>
            </vbox>

            <!-- Right Panel - Fields -->
            <vbox spacing="true"
                  padding="true"
                  width="100%"
                  height="100%">

                <hbox width="100%" spacing="true">
                    <h4 text="Chi tiết bảng"/>
                </hbox>

                <dataGrid id="keyValueEntitiesDataGrid_1"
                          dataContainer="tableDetailsDc"
                          width="100%"
                          height="100%">
                    <actions>
                        <action id="create" type="list_create"/>
                        <action id="edit" type="list_edit"/>
                        <action id="remove" type="list_remove"/>
                    </actions>
                    <columns>
                        <column property="name"
                                header="Tên cột"
                                width="150px"/>
                        <column property="dataType"
                                header="Kiểu dữ liệu"
                                width="120px"/>
                        <column property="size"
                                header="Kích thước"
                                width="100px"/>
                        <column property="isNull"
                                header="Bắt buộc"
                                width="80px"/>
                        <column property="defaultValue"
                                header="Giá trị mặc định"
                                width="140px"/>
                        <column property="description"
                                header="Mô tả"/>
                        <column property="status"
                                header="Trạng thái"/>
                    </columns>
                </dataGrid>
            </vbox>
        </split>

    </layout>
</view>